<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliente</title>
    <base href="/">
    <link rel="stylesheet" type="text/css" href="/templates/css/produto.css">
    <link rel="stylesheet" type="text/css" href="/templates/css/global.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

    <script src="https://cdn.ckeditor.com/4.15.1/standard/ckeditor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.1/jquery.maskMoney.min.js"></script>
</head>

<body>
    <%- include('../componentes/menu.ejs'); -%>

        <br><br><br>
        <div class="notify"><span id="notifyType" class=""></span></div>
        <form class="container long" style="height: 100%;" action="/compra/cadastro" method="POST">
            <div class="container-form">
                <div class="informations">
                    <header>Novo Cliente</header>
                    <main>
                        <div class="row">
                            <fieldset class='float-label-field'>
                                <label for="codigo">Descrição</label>
                                <input id="descricao" value="" class='texto' required name="descricao" type='text'>
                            </fieldset>
                        </div>


                        <div class="row">
                            <fieldset class='float-label-field'>
                                <label for="telefone">Quantidade</label>
                                <input id="quantidade" class='texto' required name="quantidade" type='text'>
                            </fieldset>
                            <fieldset class='float-label-field'>
                                <label for="telefone">Valor</label>
                                <input id="valor" class='texto' required name="valor" type='text'>
                            </fieldset>

                        </div>
                        <div class="row">
                            <fieldset class='float-label-field'>
                                <label for="telefone">Data Compra</label>
                                <input id="data" class='texto' required name="data" type='date'>
                            </fieldset>
                            <fieldset class='float-label-field'>
                                <label for="telefone">Responsável</label>
                                <input id="responsavel" class='texto' required name="responsavel" type='text'>
                            </fieldset>

                        </div>

                    </main>
                    <footer>
                        <button type="submit" onclick="getModel();" class="register">Registrar</button>
                    </footer>
                </div>
            </div>
        </form>
        <script>
            // let fields = document.querySelectorAll('form fieldset.float-label-field');
            // for (let index = 0; index < fields.length; index++) {
            //     const field = fields[index];
            //     const input = field.querySelector('input');
            //     input.onfocus = ()=>{
            //         field.classList.add('float');
            //         field.classList.add('focus');
            //     };
            //     input.onblur = ()=>{
            //         field.classList.remove('focus');
            //         if (!input.value) {
            //             field.classList.remove('float');
            //         }
            //     };
            // }

            function getModel() {
                var descricao = $('#descricao').val();
                var quantidade = $('#quantidade').val();
                var valor = $('#valor').val();
                var data = $('#data').val();
                var responsavel = $('#responsavel').val();

                var dados = {
                    descricao: descricao,
                    quantidade: quantidade,
                    valor: valor,
                    data: data,
                    responsavel: responsavel
                }
                if (dados == '') {
                    $.post("/compra/cadastro", dados, function(resposta) {
                        console.log(resposta);
                    });
                }

            }

            function sucess() {
                $(".notify").toggleClass("active");
                $(".notify").toggleClass("success");
                $("#notifyType").html("Adicionado com Sucesso!");
                $(".notify").show();

                setTimeout(function() {
                    $(".notify").removeClass("active");
                    $(".notify").removeClass("success");
                    $(".notify").hide();
                }, 5000);
            }

            function failure() {
                $(".notify").addClass("active");
                $(".notify").addClass("failure");
                $("#notifyType").html("Error ao adicionar!");
                $(".notify").show();

                setTimeout(function() {
                    $(".notify").removeClass("active");
                    $(".notify").removeClass("failure");
                    $(".notify").hide();
                }, 5000);
            }
        </script>

        <script>
            sucess();
        </script>
        <%- include('../componentes/rodape.ejs'); -%>
</body>


</html>